<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="assets/stylesheet/style.css">

    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700,800,900&display=swap" rel="stylesheet">

    <title>GoVR</title>
    
  </head>
  <body>
    <header class="header">
      <nav class="header-nav container">

        <a class="logo" href="index.html"><h1>GoVR</h1></a>
        <label class ="ham-menu ham" for="toggle">&#9776;</label>
        <input class="ham-menu" id="toggle" type="checkbox">

        <ul class="menu-links">
          <li><a href="#">Browse  <span class="menu-support">&#8964;</span></a></li>
          <li><a href="index.html">Home  <span class="menu-support">&#8964;</span></a></li>
          <li><a href="#">VR Devices  <span class="menu-support">&#8964;</span></a></li>
          <li><a href="game.html">VR Games  <span class="menu-support">&#8964;</span></a></li>
          <li><a href="#">Blog</a></li>
        </ul>

        <!-- &#128270 search-button-->
        <!-- <ul class="side-menu-links">
          <li><label href="#">Search</label></li> 
          <li><label href="#">Upload</label></li>
          <li><label href="#">User</label></li>
        </ul> -->
      </nav>
    </header>
    

    <section class="game-List-Area padding">
        <div class="gamesort-sortlist container">
          <div class="container gamefilter-sort">
            <div class="empty">
    
            </div>
            <div class="game-misc">
              <a href="#" class="utility-button" role="button" onclick="sortAlphabetical();">Sort Alphabetical(A-Z)</a>
              <a href="#" class="utility-button" role="button" onclick="sortRevAlphabetical();">Sort Alphabetical(Z-A)</a>
              <a href="#" class="utility-button" role="button" onclick="sortAcending();">Sort Low to High(0-5)</a>
              <a href="#" class="utility-button" role="button" onclick="sortDescending();">Sort High to Low(5-0)</a>
    
            </div>
          </div>
        </div>
        <div class="container game-List">
          <div class="gameMain-gameArea">
            <div class="gamefilter-area">
              <div class="gamefilter-applied">
                <div class = "gamefilterapplied-header">
                  <h3>Filter  <span>Y</span></h3>
                  <a href="#" class="utility-button reset-button" role="button" onclick="reset();">Reset</a>
                
                  </div>
                <div class="gamefilteradded"> 
                  
                </div>
              </div>  
              <div class ="filtergame-list">
                <h4>Developer</h4>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByDeveloper('Steam');">Steam Labs</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByDeveloper('Epic-Games');">Epic Games</a>
                </div>
                <h4>Devices</h4>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByDevice('HTC-Vive');">HTC-Vive</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByDevice('Valve-Index');">Valve-Index</a>
                </div>
                <h4>Genre</h4>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('Action');">Action</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('Adventure');">Adventure</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('Indie');">Indie</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('Simulation');">Simulation</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('FPS');">FPS</a>
                </div>
                <div>
                  <a href="#" class="utility-button" role="button" onclick="filterByGenre('RPG');">RPG</a>
                </div>
                <div>
                <a href="#" class="utility-button reset-button" role="button" onclick="reset();">Reset</a>
                </div>
              </div>
            </div>
            <div class="gamegrid-game">
            </div>
          </div>
          
        </div>
    </section>
    <footer class="footer small-padding">
      <div class="footer-wrapper container">
        <p>&copy; Anshu Saurabh</p>
      </div>
    </footer> 
    <script>
      const games = [
        {
          name : "Pavlov",
          genre:["Action", "Adventure","Simulation", "FPS"],
          developer: "Epic-Games",
          devicesCompatible: ["HTC-Vive"],
          ratings: 4.6,
        },
        {
          name : "Shadow-Legend",
          genre:["Action", "Adventure","Simulation", "Indie"],
          developer: "Steam",
          devicesCompatible: ["Valve-Index"],
          ratings: 4.2,
        },
        {
          name : "The-Walking-Dead",
          genre:["Action", "Adventure","Simulation", "FPS"],
          developer: "Epic-Games",
          devicesCompatible: ["HTC-Vive"],
          ratings: 4.8,
        },
        {
          name : "BoneWorks",
          genre:["Action", "Adventure","Simulation", "Indie"],
          developer: "Steam",
          devicesCompatible: ["HTC-Vive", "Valve-Index"],
          ratings: 4.1,
        },
        {
          name : "Counter-Fight",
          genre:["Arcade", "Adventure","Simulation", "Indie"],
          developer: "Steam",
          devicesCompatible: ["Valve-Index"],
          ratings: 3.6,
        },
        {
          name : "Master-Bladesmith",
          genre:["RPG", "Adventure", "Indie"],
          developer: "Steam",
          devicesCompatible: ["HTC-Vive", "Valve-Index"],
          ratings: 3.4,

        },
      ];
       
      var compGrid = document.getElementsByClassName("gamegrid-game");
      //var newDiv = document.createElement("div");
      function generateHTML(gameList)
      {
        gameList.forEach(elem =>{
          var newDiv = document.createElement("div");
          //return games.reduce()
          var s = `<div class="game">
            <div>

            <image class="game-img-res" src="assets/media/images/${elem.name}/header.jpg">
            </div>
            <div>
            <h2>${elem.name}</h2>
            <p>Genre: ${elem.genre.reduce((acc, gen, index, arr)=>{
              acc += gen;
              if(index != arr.length-1)
                acc+=", ";
              return acc;
            },"")}</p>
            <p>Developer: ${elem.developer}
              </p>
            <p>Devices Supported: ${elem.devicesCompatible.reduce((acc, device, index, arr)=>{
              acc += device;
              if(index != arr.length-1)
                acc+=", ";
              return acc;
            },"")} </p>
            <p>Rating: ${elem.ratings}/5.0</p> 
            </div>
            </div>`; 
          newDiv.innerHTML = s;
          compGrid[0].appendChild(newDiv);
        });
      }
      generateHTML(games);
      function sortAlphabetical()
      {
        compGrid[0].innerHTML = '';
        console.log(compGrid[0].childElementCount);
        var gamesClone = [...games];
        console.log(gamesClone);
        gamesClone.sort((a,b) => a.name.localeCompare(b.name));
        console.log(gamesClone);
        generateHTML(gamesClone);
      }      
      function sortRevAlphabetical()
      {
        compGrid[0].innerHTML = '';
        console.log(compGrid[0].childElementCount);
        var gamesClone = [...games];
        console.log(gamesClone);
        gamesClone.sort((a,b) => b.name.localeCompare(a.name));
        console.log(gamesClone);
        generateHTML(gamesClone);
      }   
      function filterByDeveloper(str)
      {
        compGrid[0].innerHTML = '';
        var arr = games.reduce((acc, elem)=>{
          if(elem.developer.includes(str))
            acc.push(elem);
          //console.log(elem.developer);
          return acc;
        },[]);
        console.log(arr);
        generateHTML(arr);
      }
      function filterByGenre(str) {
        compGrid[0].innerHTML = '';
        var arr = games.reduce((acc, elem)=>{
          if(elem.genre.join(' ').includes(str))
            acc.push(elem);
          //console.log(elem.developer);
          return acc;
        },[]);
        console.log(arr);
        generateHTML(arr);
      }
      function filterByDevice(str)
      {
        compGrid[0].innerHTML = '';
        var arr = games.reduce((acc, elem)=>{
          if(elem.devicesCompatible.join(' ').includes(str))
            acc.push(elem);
          //console.log(elem.developer);
          return acc;
        },[]);
        console.log(arr);
        generateHTML(arr);
      }

      function sortAcending()
      {
        compGrid[0].innerHTML = '';
        console.log(compGrid[0].childElementCount);
        var gamesClone = [...games];
        console.log(gamesClone);
        gamesClone.sort((a,b) => a.ratings -b.ratings);
        console.log(gamesClone);
        generateHTML(gamesClone);
      }

      function sortDescending()
      {
        compGrid[0].innerHTML = '';
        console.log(compGrid[0].childElementCount);
        var gamesClone = [...games];
        console.log(gamesClone);
        gamesClone.sort((a,b) => b.ratings- a.ratings);
        console.log(gamesClone);
        generateHTML(gamesClone);
      }
      function reset() {
        compGrid[0].innerHTML = '';
        generateHTML(games);
      }
    </script>
  </body>
</html>